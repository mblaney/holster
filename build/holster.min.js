(()=>{var e={127:e=>{var t,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var o in t)r(e,o,{get:t[o],enumerable:!0})})(s,{isBrowser:()=>a,isBun:()=>d,isDeno:()=>f,isJsDom:()=>u,isNode:()=>l,isWebWorker:()=>c}),e.exports=(t=s,((e,t,s,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of n(t))i.call(e,s)||undefined===s||r(e,s,{get:()=>t[s],enumerable:!(a=o(t,s))||a.enumerable});return e})(r({},"__esModule",{value:!0}),t));var a="undefined"!=typeof window&&void 0!==window.document,l="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,c="object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,u="undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&"userAgent"in navigator&&"string"==typeof navigator.userAgent&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),f="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,d="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.bun},591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},45:e=>{const t=()=>{const e={store:{},check:t=>!!e.store[t]&&e.track(t),track:t=>(e.store[t]=Date.now(),e.expiry||(e.expiry=setTimeout((()=>{const t=Date.now();Object.keys(e.store).forEach((r=>{t-e.store[r]>9e3&&delete e.store[r]})),e.expiry=null}),9e3)),t)};return e};t.random=()=>Math.random().toString(36).slice(-9),e.exports=t},664:e=>{e.exports=(e,t)=>{const r=e["#"],o=e["."];var n=t[r];if(!n||!o)return;let i=n[o];return i?((n={_:n._,[o]:i})._[">"]={[o]:n._[">"][o]},{[r]:n}):void 0}},626:e=>{const t=(e,t,r,o)=>e<t?{historical:!0}:e>t?{incoming:!0}:("string"!=typeof r&&(r=JSON.stringify(r)||""),"string"!=typeof o&&(o=JSON.stringify(o)||""),r===o?{state:!0}:r<o?{current:!0}:{incoming:!0});t.mix=(e,r)=>{var o=Date.now(),n={},i={};let s=0;return Object.keys(e).forEach((a=>{const l=e[a];Object.keys(l).forEach((e=>{if("_"===e)return;const c=l[e],u=l._[">"][e],f=(r[a]||{})[e],d=(r[a]||{_:{">":{}}})._[">"][e]||0,p=u-o;if(p>0){if(p>864e5)return;(0===s||p<s)&&(s=p),i[a]||(i[a]={_:{"#":a,">":{}}}),i[a][e]=c,i[a]._[">"][e]=u}else t(u,d,c,f).incoming&&(n[a]||(n[a]={_:{"#":a,">":{}}}),r[a]||(r[a]={_:{"#":a,">":{}}}),r[a][e]=n[a][e]=c,r[a]._[">"][e]=n[a]._[">"][e]=u)}))})),{now:n,defer:i,wait:s}},e.exports=t},299:(e,t,r)=>{const o=r(127),n=r(45),i=r(664),s=r(626),a=r(621);e.exports=e=>{const t=n(),l=a(e);var c={},u={};const f=(e,r)=>{const o=i(e.get,c);o?r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],put:o})):l.get(e.get,((o,i)=>{r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],put:i,err:o}))}))},d=(e,r)=>{const o=s.mix(e.put,c);l.put(o.now,((o,i)=>{r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],err:o,ok:i}))})),0!==o.wait&&setTimeout((()=>d(o.defer,r)),o.wait)},p=e=>({get:(r,o)=>{const s=i(r,c);s?o(null,s):l.get(r,((i,s)=>{if(s)return void o(null,s);const a=n.random();u[a]=o,e(JSON.stringify({"#":t.track(a),get:r}))}))},put:(r,o)=>{const i=s.mix(r,c);l.put(i.now,o),e(JSON.stringify({"#":t.track(n.random()),put:r}))}});if(o.isNode){const e=r(591),o=new e.Server({port:8080}),n=(t,r)=>{o.clients.forEach((o=>{o.readyState===e.OPEN&&o.send(t,{binary:r})}))};return o.on("connection",(e=>{e.on("error",console.error),e.on("message",((e,r)=>{const o=JSON.parse(e);t.check(o["#"])||(t.track(o["#"]),o.get&&f(o,n),o.put&&d(o,n),n(e,r),(cb=u[o["@"]])&&(cb(null,o),delete u[o["@"]]))}))})),p(n)}let h=new WebSocket("ws://localhost:8080");const g=e=>{h&&h.readyState===WebSocket.OPEN?h.send(e):console.log("websocket not available")},v=()=>{h||(h=new WebSocket("ws://localhost:8080")),h.onclose=e=>{h=null,setTimeout(v,Math.floor(5e3*Math.random()))},h.onerror=e=>{console.error(e)},h.onmessage=e=>{const r=JSON.parse(e.data);t.check(r["#"])||(t.track(r["#"]),r.get&&f(r,g),r.put&&d(r,g),(cb=u[r["@"]])&&(cb(null,r),delete u[r["@"]]),g(e.data))}};return v(),p(g)}},166:(e,t,r)=>{const o=r(62),n=r(413),i=String.fromCharCode(31),s=String.fromCharCode(3),a=e=>{var t,r=null;if(e||(e={}),e.log||(e.log=console.log),e.batch||(e.batch=1e4),e.wait||(e.wait=1),e.size||(e.size=1048576),e.code||(e.code="!"),!e.store)return void e.log("Radisk needs `store` interface with `{get: fn, put: fn, list: fn}`");if(!e.store.get)return void e.log("Radisk needs `store.get` interface with `(file, cb)`");if(!e.store.put)return void e.log("Radisk needs `store.put` interface with `(file, data, cb)`");if(!e.store.list)return void e.log("Radisk needs a streaming `store.list` interface with `(cb)`");const n=(r,o,i)=>(r=""+r,"function"==typeof o?(i=o,void 0!==(o=n.batch(r))||n.thrash.at&&void 0!==(o=n.thrash.at(r))?i(t,o):n.read(r,i)):(n.batch(r,o),i&&n.batch.acks.push(i),++n.batch.ed>=e.batch?n.thrash():(clearTimeout(n.batch.timeout),void(n.batch.timeout=setTimeout(n.thrash,e.wait)))));return n.batch=o(),n.batch.acks=[],n.batch.ed=0,n.thrash=()=>{if(n.thrash.ing)return n.thrash.more=!0;clearTimeout(n.batch.timeout),n.thrash.more=!1,n.thrash.ing=!0;var t=n.thrash.at=n.batch;n.batch=null,n.batch=o(),n.batch.acks=[],n.batch.ed=0;let r=0;n.save(t,((o,i)=>{++r>1||(o&&e.log(o),t.acks.forEach((e=>e(o,i))),n.thrash.at=null,n.thrash.ing=!1,n.thrash.more&&n.thrash())}))},n.save=(r,i)=>{const s={find:(t,r)=>{if(!(r<s.start))return s.start=r,e.store.list(s.lex),!0},lex:t=>{if(!t||t>s.start)return s.end=t,s.mix(s.file||e.code,s.start,s.end),!0;s.file=t},mix:(e,a,l)=>{s.start=s.end=s.file=t,n.parse(e,((t,c)=>{if(t)return i(t);o.map(r,((e,t)=>{if(!(t<a))return l&&l<t?(s.start=t,s.start):void c(t,e)})),n.write(e,c,s.next)}))},next:(e,t)=>e?i(e):s.start?o.map(r,s.find):void i(e,t)};o.map(r,s.find)},n.write=(t,i,s)=>{r=null;const l={text:"",count:0,file:t,each:(t,r,n,s)=>{if(null!==t){l.count++;var c=a.encode(s.length)+"#"+a.encode(n)+(void 0===t?"":"="+a.encode(t))+"\n";if(l.count>1&&l.text.length+c.length>e.size)return l.text="",l.limit=Math.ceil(l.count/2),l.count=0,l.sub=o(),o.map(i,l.slice),!0;l.text+=c}},put:()=>{e.store.put(t,l.text,s)},slice:(e,t)=>{if(!(t<l.file)){if(++l.count>l.limit){var r=l.file;let e=t.indexOf(".");return l.file=-1===e?t:t.substring(0,e),l.sub(l.file,null),l.count=0,n.write(r,l.sub,l.next),!0}l.sub(t,e)}},next:e=>{if(e)return s(e);l.sub=o(),o.map(i,l.slice)||n.write(l.file,l.sub,s)}};o.map(i,l.each,!0)||l.put()},n.read=(o,i)=>{if(r){let e=r(o);if(void 0!==e)return i(t,e)}let s=o,a=o.indexOf(".");-1!==a&&(s=o.substring(0,a));const l={lex:e=>{if(!e)return l.file?void n.parse(l.file,l.it):void i("no file found",t);e>s||e<l.file||(l.file=e)},it:(t,n)=>{t&&e.log(t),n&&(r=n,l.value=n(o)),i(t,l.value)}};e.store.list(l.lex)},n.parse=(r,n)=>{const s={disk:o(),read:(e,r)=>{if(e)return n(e);if(!r)return n(t,s.disk);let o=[],i=s.split(r);for(;i;){let e,t,r=i[1];i=s.split(i[2])||"","#"===i[0]&&(e=i[1],o=o.slice(0,r),r<=o.length&&o.push(e)),i=s.split(i[2])||"","\n"!==i[0]&&("="===i[0]&&(t=i[1]),void 0!==e&&void 0!==t&&s.disk(o.join(""),t),i=s.split(i[2]))}n(t,s.disk)},split:e=>{if(!e)return;let t=-1,r="",o=null;for(;(o=e[++t])&&o!==i;)r+=o;let n={};return o?[r,a.decode(e.slice(t),n),e.slice(t+n.i)]:void 0}};e.store.get(r,s.read)},n};a.encode=e=>{let t="";if(e instanceof Array&&2===e.length&&(t=s+e[1],e=e[0]),"string"==typeof e){let r=0,o=null,n=i;for(;o=e[r++];)o===i&&(n+=i);return n+'"'+e+t+i}let r=null;return(r=n.rel.is(e))?i+"#"+r+t+i:n.num.is(e)?i+"+"+(e||0)+t+i:!0===e?i+"+"+t+i:!1===e?i+"-"+t+i:void 0},a.decode=(e,t)=>{var r="",o=-1,a=0,l=null,c=null;if(e[0]!==i)return;for(;l=e[++o];)if(c){if(l===i&&--a<=0)break;r+=l}else l===i?a++:c=l||!0;t&&(t.i=o+1);let[u,f]=r.split(s);if(f){if(f=parseFloat(f),'"'===c)return[u,f];if("#"===c)return[n.rel.ify(u),f];if("+"===c)return 0===u.length?[!0,f]:[parseFloat(u),f];if("-"===c)return[!1,f]}else{if('"'===c)return r;if("#"===c)return n.rel.ify(r);if("+"===c)return 0===r.length||parseFloat(r);if("-"===c)return!1}},e.exports=a},62:(e,t,r)=>{const o=r(413),n=String.fromCharCode(29),i=String.fromCharCode(30),s=()=>{const e=(t,r,s)=>{if(s||(e[n]||(e[n]={}),s=e[n]),!t)return s;let a=0,l={},c=t[a];const u=t.length-1,f=void 0===r;let d=s[c];for(;!d&&a<u;)c+=t[++a],d=s[c];if(d){if(a!==u)return d[n]||f||(d[n]={}),e(t.slice(++a),r,d[n]);if(f)return void 0===d[i]?d[n]:d[i];d[i]=r}else if(o.obj.map(s,((e,o)=>{let a=0,c="";for(;o[a]===t[a];)c+=o[a++];if(c){if(f){if(a<=u)return;return l[o.slice(a)]=e,e}let d={[o.slice(a)]:e,[t.slice(a)]:{[i]:r}};return s[c]={[n]:d},delete s[o],!0}}))){if(f)return l}else{if(f)return;s[c]||(s[c]={}),s[c][i]=r}};return e};s.map=function e(t,r,o,s){s||(s=[]);var a=t[n]||t,l=Object.keys(a).sort();for(let t=0;t<l.length;t++){let c=l[t],u=a[c],f=u[i];if(void 0!==f){if(f=r(f,s.join("")+c,c,s),void 0!==f)return f}else o&&r(void 0,s.join(""),c,s);if(u[n]){if(s.push(c),f=e(u[n],r,o,s),void 0!==f)return f;s.pop()}}},e.exports=s},621:(e,t,r)=>{const o=r(127),n=r(166),i=r(62),s=r(413);e.exports=e=>{s.obj.is(e)||(e={}),e.file=String(e.file||"radata"),e.store||(e.store=(e=>{if(o.isNode){const t=r(603);return t.existsSync(e)||t.mkdirSync(e),{get:(r,o)=>{t.readFile(e+"/"+r,((e,t)=>{if(e){if("ENOENT"===e.code)return void o();console.log("ERROR:",e)}t&&(t=t.toString()),o(e,t)}))},put:(r,o,n)=>{var i=Math.random().toString(36).slice(-9),s=r+"."+i+".tmp";t.writeFile(s,o,((o,i)=>{o?n(o):t.rename(s,e+"/"+r,n)}))},list:r=>{t.readdir(e,((e,t)=>{t.forEach(r),r()}))}}}return{get:(e,t)=>t(),put:(e,t,r)=>r(),list:e=>e()}})(e.file));const t=n(e);return{get:(e,r)=>{if(!e)return void r("lex required");var o,n=e["#"],s=e["."]||"";const a=(e,t)=>{o||(o={_:{"#":n,">":{}}}),o[t]=e[0],o._[">"][t]=e[1]};t(n+"."+s,((e,t)=>{let l;t&&(i.map(t,a),o||a(t,s),l={[n]:o}),r(e,l)}))},put:(e,r)=>{if(!e)return void r("graph required");var o=0;const n=(e,t)=>{o--,n.err||((n.err=e)?r(e||"ERROR!"):o>0||r(n.err,1))};Object.keys(e).forEach((r=>{var i=e[r];Object.keys(i).forEach((e=>{if("_"===e)return;o++;let s=i[e],a=i._[">"][e];t(r+"."+e,[s,a],n)}))}))}}}},413:e=>{const t={is:e=>!(e instanceof Array)&&(e-parseFloat(e)+1>=0||1/0===e||-1/0===e)},r={is:e=>!!e&&(e instanceof Object&&e.constructor===Object||"Object"===Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]),map:(e,t,r)=>{var o=Object.keys(e);for(let n=0;n<o.length;n++){let i=t(e[o[n]],o[n],r);if(void 0!==i)return i}},put:(e,t,r)=>(e||(e={}),e[t]=r,e),del:(e,t)=>{if(e)return e[t]=null,delete e[t],e}},o=(e,t,r)=>{r.id?r.id=!1:r.id="#"===t&&"string"==typeof e&&e},n={is:e=>{if(e&&e["#"]&&!e._&&r.is(e)){let t={};if(r.map(e,o,t),t.id)return t.id}return!1},ify:e=>r.put({},"#",e)};e.exports={num:t,obj:r,rel:n}},603:()=>{}},t={},r=function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}(299);Holster=r})();
//# sourceMappingURL=holster.min.js.map