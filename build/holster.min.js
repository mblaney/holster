(()=>{var e={127:e=>{var t,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var o in t)r(e,o,{get:t[o],enumerable:!0})})(s,{isBrowser:()=>a,isBun:()=>d,isDeno:()=>f,isJsDom:()=>u,isNode:()=>c,isWebWorker:()=>l}),e.exports=(t=s,((e,t,s,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of n(t))i.call(e,s)||undefined===s||r(e,s,{get:()=>t[s],enumerable:!(a=o(t,s))||a.enumerable});return e})(r({},"__esModule",{value:!0}),t));var a="undefined"!=typeof window&&void 0!==window.document,c="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,l="object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,u="undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&"userAgent"in navigator&&"string"==typeof navigator.userAgent&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),f="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,d="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.bun},591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},45:e=>{const t=()=>{const e={store:{},check:t=>!!e.store[t]&&e.track(t),track:t=>(e.store[t]=Date.now(),e.expiry||(e.expiry=setTimeout((()=>{const t=Date.now();Object.keys(e.store).forEach((r=>{t-e.store[r]>9e3&&delete e.store[r]})),e.expiry=null}),9e3)),t)};return e};t.random=()=>Math.random().toString(36).slice(-9),e.exports=t},664:e=>{e.exports=(e,t)=>{const r=e["#"],o=e["."];var n=t[r];if(!n||!o)return;let i=n[o];return i?((n={_:n._,[o]:i})._[">"]={[o]:n._[">"][o]},{[r]:n}):void 0}},626:e=>{const t=(e,t,r,o)=>e<t?{historical:!0}:e>t?{incoming:!0}:(r=JSON.stringify(r)||"")===(o=JSON.stringify(o)||"")?{state:!0}:r<o?{current:!0}:{incoming:!0};t.mix=(e,r)=>{var o=Date.now(),n={},i={};let s=0;return Object.keys(e).forEach((a=>{const c=e[a];Object.keys(c).forEach((e=>{if("_"===e)return;const l=c[e],u=c._[">"][e],f=(r[a]||{})[e],d=(r[a]||{_:{">":{}}})._[">"][e]||0,p=u-o;if(p>0){if(p>864e5)return;(0===s||p<s)&&(s=p),i[a]||(i[a]={_:{"#":a,">":{}}}),i[a][e]=l,i[a]._[">"][e]=u}else t(u,d,l,f).incoming&&(n[a]||(n[a]={_:{"#":a,">":{}}}),r[a]||(r[a]={_:{"#":a,">":{}}}),r[a][e]=n[a][e]=l,r[a]._[">"][e]=n[a]._[">"][e]=u)}))})),{now:n,defer:i,wait:s}},e.exports=t},299:(e,t,r)=>{const o=r(127),n=r(45),i=r(664),s=r(626),a=r(621);e.exports=e=>{const t=n(),c=a(e);var l={},u={};const f=(e,r)=>{const o=i(e.get,l);o?r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],put:o})):c.get(e.get,((o,i)=>{r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],put:i,err:o}))}))},d=(e,r)=>{const o=s.mix(e.put,l);c.put(o.now,((o,i)=>{r(JSON.stringify({"#":t.track(n.random()),"@":e["#"],err:o,ok:i}))})),0!==o.wait&&setTimeout((()=>d(o.defer,r)),o.wait)},p=e=>({get:(r,o)=>{const s=i(r,l);s?o(null,s):c.get(r,((i,s)=>{if(s)return void o(null,s);const a=n.random();u[a]=o,e(JSON.stringify({"#":t.track(a),get:r}))}))},put:(r,o)=>{const i=s.mix(r,l);c.put(i.now,o),e(JSON.stringify({"#":t.track(n.random()),put:r}))}});if(o.isNode){const e=r(591),o=new e.Server({port:8080}),n=(t,r)=>{o.clients.forEach((o=>{o.readyState===e.OPEN&&o.send(t,{binary:r})}))};return o.on("connection",(e=>{e.on("error",console.error),e.on("message",((e,r)=>{const o=JSON.parse(e);t.check(o["#"])||(t.track(o["#"]),o.get&&f(o,n),o.put&&d(o,n),n(e,r),(cb=u[o["@"]])&&(cb(null,o),delete u[o["@"]]))}))})),p(n)}let h=new WebSocket("ws://localhost:8080");const g=e=>{h&&h.readyState===WebSocket.OPEN?h.send(e):console.log("websocket not available")},v=()=>{h||(h=new WebSocket("ws://localhost:8080")),h.onclose=e=>{h=null,setTimeout(v,Math.floor(5e3*Math.random()))},h.onerror=e=>{console.error(e)},h.onmessage=e=>{const r=JSON.parse(e.data);t.check(r["#"])||(t.track(r["#"]),r.get&&f(r,g),r.put&&d(r,g),(cb=u[r["@"]])&&(cb(null,r),delete u[r["@"]]),g(e.data))}};return v(),p(g)}},166:(e,t,r)=>{const o=r(62),n=r(413),i=String.fromCharCode(31),s=e=>{var t,r=null;if(e||(e={}),e.log||(e.log=console.log),e.batch||(e.batch=1e4),e.wait||(e.wait=1),e.size||(e.size=1048576),e.code||(e.code="!"),!e.store)return void e.log("Radisk needs `store` interface with `{get: fn, put: fn, list: fn}`");if(!e.store.get)return void e.log("Radisk needs `store.get` interface with `(file, cb)`");if(!e.store.put)return void e.log("Radisk needs `store.put` interface with `(file, data, cb)`");if(!e.store.list)return void e.log("Radisk needs a streaming `store.list` interface with `(cb)`");const n=(r,o,i)=>(r=""+r,"function"==typeof o?(i=o,void 0!==(o=n.batch(r))||n.thrash.at&&void 0!==(o=n.thrash.at(r))?i(t,o):n.read(r,i)):(n.batch(r,o),i&&n.batch.acks.push(i),++n.batch.ed>=e.batch?n.thrash():(clearTimeout(n.batch.timeout),void(n.batch.timeout=setTimeout(n.thrash,e.wait)))));return n.batch=o(),n.batch.acks=[],n.batch.ed=0,n.thrash=()=>{if(n.thrash.ing)return n.thrash.more=!0;clearTimeout(n.batch.timeout),n.thrash.more=!1,n.thrash.ing=!0;var t=n.thrash.at=n.batch;n.batch=null,n.batch=o(),n.batch.acks=[],n.batch.ed=0;let r=0;n.save(t,((o,i)=>{++r>1||(o&&e.log(o),t.acks.forEach((e=>e(o,i))),n.thrash.at=null,n.thrash.ing=!1,n.thrash.more&&n.thrash())}))},n.save=(r,i)=>{const s={find:(t,r)=>{if(!(r<s.start))return s.start=r,e.store.list(s.lex),!0},lex:t=>{if(!t||t>s.start)return s.end=t,s.mix(s.file||e.code,s.start,s.end),!0;s.file=t},mix:(e,a,c)=>{s.start=s.end=s.file=t,n.parse(e,((t,l)=>{if(t)return i(t);o.map(r,((e,t)=>{if(!(t<a))return c&&c<t?(s.start=t,s.start):void l(t,e)})),n.write(e,l,s.next)}))},next:(e,t)=>e?i(e):s.start?o.map(r,s.find):void i(e,t)};o.map(r,s.find)},n.write=(t,i,a)=>{r=null;const c={text:"",count:0,file:t,each:(t,r,n,a)=>{c.count++;var l=s.encode(a.length)+"#"+s.encode(n)+(void 0===t?"":"="+s.encode(t))+"\n";if(c.count>1&&c.text.length+l.length>e.size)return c.text="",c.limit=Math.ceil(c.count/2),c.count=0,c.sub=o(),o.map(i,c.slice),!0;c.text+=l},put:()=>{e.store.put(t,c.text,a)},slice:(e,t)=>{if(!(t<c.file)){if(++c.count>c.limit){var r=c.file;let e=t.indexOf(".");return c.file=-1===e?t:t.substring(0,e),c.count=0,n.write(r,c.sub,c.next),!0}c.sub(t,e)}},next:e=>{if(e)return a(e);c.sub=o(),o.map(i,c.slice)||n.write(c.file,c.sub,a)}};o.map(i,c.each,!0)||c.put()},n.read=(o,i)=>{if(r){let e=r(o);if(void 0!==e)return i(t,e)}const s={lex:e=>{if(!e||e>o){if(!s.file)return void i("no file found",t);if(s.ing)return;return s.ing=!0,void n.parse(s.file,s.it)}s.file=e},it:(t,n)=>{t&&e.log(t),n&&(r=n,s.value=n(o)),i(t,s.value)}};e.store.list(s.lex)},n.parse=(r,n)=>{const a={disk:o(),read:(e,r)=>{if(e)return n(e);if(!r)return n(t,a.disk);let o=[],i=a.split(r);for(;i;){let e,t,r=i[1];i=a.split(i[2])||"","#"===i[0]&&(e=i[1],o=o.slice(0,r),r<=o.length&&o.push(e)),i=a.split(i[2])||"","\n"!==i[0]&&("="===i[0]&&(t=i[1]),void 0!==e&&void 0!==t&&a.disk(o.join(""),t),i=a.split(i[2]))}n(t,a.disk)},split:e=>{if(!e)return;let t=-1,r="",o=null;for(;(o=e[++t])&&o!==i;)r+=o;let n={};return o?[r,s.decode(e.slice(t),n),e.slice(t+n.i)]:void 0}};e.store.get(r,a.read)},n};s.encode=e=>{if("string"==typeof e){let t=0,r=null,o=i;for(;r=e[t++];)r===i&&(o+=i);return o+'"'+e+i}let t=null;return e&&e["#"]&&(t=n.rel.is(e))?i+"#"+t+i:n.num.is(e)?i+"+"+(e||0)+i:null===e?i+" "+i:!0===e?i+"+"+i:!1===e?i+"-"+i:void 0},s.decode=(e,t)=>{var r="",o=-1,s=0,a=null,c=null;if(e[0]===i){for(;a=e[++o];)if(c){if(a===i&&--s<=0)break;r+=a}else a===i?s++:c=a||!0;return t&&(t.i=o+1),'"'===c?r:"#"===c?n.rel.ify(r):"+"===c?0===r.length||parseFloat(r):" "===c?null:"-"!==c&&void 0}},e.exports=s},62:(e,t,r)=>{const o=r(413),n=String.fromCharCode(29),i=String.fromCharCode(30),s=()=>{const e=(t,r,s)=>{if(s||(e[n]||(e[n]={}),s=e[n]),!t)return s;let a=0,c={},l=t[a];const u=t.length-1,f=void 0===r;let d=s[l];for(;!d&&a<u;)l+=t[++a],d=s[l];if(d){if(a!==u)return d[n]||f||(d[n]={}),e(t.slice(++a),r,d[n]);if(f)return void 0===d[i]?d[n]:d[i];d[i]=r}else if(o.obj.map(s,((e,o)=>{let a=0,l="";for(;o[a]===t[a];)l+=o[a++];if(l){if(f){if(a<=u)return;return c[o.slice(a)]=e,e}let d={[o.slice(a)]:e,[t.slice(a)]:{[i]:r}};return s[l]={[n]:d},delete s[o],!0}}))){if(f)return c}else{if(f)return;s[l]||(s[l]={}),s[l][i]=r}};return e};s.map=function e(t,r,o,s){s||(s=[]);var a=t[n]||t,c=Object.keys(a).sort();for(let t=0;t<c.length;t++){let l=c[t],u=a[l],f=u[i];if(void 0!==f){if(f=r(f,s.join("")+l,l,s),void 0!==f)return f}else o&&r(void 0,s.join(""),l,s);if(u[n]){if(s.push(l),f=e(u[n],r,o,s),void 0!==f)return f;s.pop()}}},e.exports=s},621:(e,t,r)=>{const o=r(127),n=r(166),i=r(62),s=r(413);e.exports=e=>{s.obj.is(e)||(e={}),e.file=String(e.file||"radata"),e.store||(e.store=(e=>{if(o.isNode){const t=r(603);return t.existsSync(e)||t.mkdirSync(e),{get:(r,o)=>{t.readFile(e+"/"+r,((e,t)=>{if(e){if("ENOENT"===e.code)return void o();console.log("ERROR:",e)}t&&(t=t.toString()),o(e,t)}))},put:(r,o,n)=>{var i=Math.random().toString(36).slice(-9),s=r+"."+i+".tmp";t.writeFile(s,o,((o,i)=>{o?n(o):t.rename(s,e+"/"+r,n)}))},list:r=>{t.readdir(e,((e,t)=>{t.forEach(r),r()}))}}}return{get:(e,t)=>t(),put:(e,t,r)=>r(),list:e=>e()}})(e.file));const t=n(e);return{get:(e,r)=>{if(!e)return void r("lex required");var o,n=e["#"],s=e["."]||"";const a=(e,t)=>{var r=JSON.parse(e);o||(o={_:{"#":n,">":{}}}),o[t]=r[0],o._[">"][t]=r[1]};t(n+"."+s,((e,t)=>{let c;t&&(i.map(t,a),o||a(t,s),c={[n]:o}),r(e,c)}))},put:(e,r)=>{if(!e)return void r("graph required");var o=0;const n=(e,t)=>{o--,n.err||((n.err=e)?r(e||"ERROR!"):o>0||r(n.err,1))};Object.keys(e).forEach((r=>{var i=e[r];Object.keys(i).forEach((e=>{if("_"===e)return;o++;let s=i[e],a=i._[">"][e];t(r+"."+e,JSON.stringify([s,a]),n)}))}))}}}},413:e=>{const t={is:e=>!(e instanceof Array)&&(e-parseFloat(e)+1>=0||1/0===e||-1/0===e)},r={is:e=>!!e&&(e instanceof Object&&e.constructor===Object||"Object"===Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]),map:(e,t,r)=>{var o=Object.keys(e);for(let n=0;n<o.length;n++){let i=t(e[o[n]],o[n],r);if(void 0!==i)return i}},put:(e,t,r)=>(e||(e={}),e[t]=r,e),del:(e,t)=>{if(e)return e[t]=null,delete e[t],e}},n=(e,t,r)=>{r.id?r.id=!1:r.id="#"===t&&"string"==typeof e&&e},i={is:e=>{if(e&&e["#"]&&!e._&&obj_is(e)){let t={};if(t.map(e,n,t),t.id)return o.id}return!1},ify:e=>r.put({},"#",e)};e.exports={num:t,obj:r,rel:i}},603:()=>{}},t={},r=function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}(299);Holster=r})();
//# sourceMappingURL=holster.min.js.map